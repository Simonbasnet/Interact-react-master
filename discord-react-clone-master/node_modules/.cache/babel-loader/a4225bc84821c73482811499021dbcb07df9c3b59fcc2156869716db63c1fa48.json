{"ast":null,"code":"import _objectSpread from \"C:/Users/asus/Documents/discord-react-clone-master/discord-react-clone-master/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _taggedTemplateLiteral from \"C:/Users/asus/Documents/discord-react-clone-master/discord-react-clone-master/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";\nvar _jsxFileName = \"C:\\\\Users\\\\asus\\\\Documents\\\\discord-react-clone-master\\\\discord-react-clone-master\\\\src\\\\components\\\\Chat\\\\MessagesWrapper.js\",\n  _templateObject,\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useLayoutEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport { MemberMessageGroup, Message } from './MemberMessage';\nimport WelcomeChannelMessage from './WelcomeChannelMessage';\nimport ScrollableArea from '../ScrollableArea';\nimport MemberCardPopup from '../MemberCardPopup';\nimport data from '../../data';\nvar StyledMessagesWrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  flex: 1 1 auto;\\n  position: relative;\\n\"])));\n_c = StyledMessagesWrapper;\nvar createMessageGroup = function createMessageGroup(groupId, guild, member, time, onMemberClick, messages) {\n  return /*#__PURE__*/React.createElement(MemberMessageGroup, {\n    key: groupId,\n    guild: guild,\n    member: member,\n    time: time,\n    onMemberClick: onMemberClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 3\n    }\n  }, messages);\n};\nvar MessagesWrapper = function MessagesWrapper(_ref) {\n  _s();\n  var channelName = _ref.channelName,\n    guild = _ref.guild,\n    messages = _ref.messages;\n  var bottomElement = useRef(null);\n  useLayoutEffect(function () {\n    bottomElement.current.scrollIntoView({\n      behavior: 'instant'\n    });\n  });\n  var handleMemberClick = function handleMemberClick(element, member) {\n    var target = element.target;\n    var targetRect = target.getBoundingClientRect();\n    MemberCardPopup.show({\n      direction: 'left',\n      position: {\n        x: targetRect.left + targetRect.width + 10,\n        y: targetRect.top\n      },\n      member: member\n    });\n  };\n  var lastUserId = messages.length > 0 ? messages[0].userId : null;\n  var groupsComponents = [];\n  var messagesComponents = [];\n  var headingGroupMessage = null;\n  var closeMessageGroupAndClearMessages = function closeMessageGroupAndClearMessages() {\n    var userId = headingGroupMessage.userId;\n    var guildMembers = guild ? guild.members : [];\n    var guildMember = guildMembers.find(function (m) {\n      return m.userId === userId;\n    });\n    var member = _objectSpread(_objectSpread({}, data.users[headingGroupMessage.userId]), {}, {\n      roles: guildMember ? guildMember.roles : null\n    });\n    var currentGroupId = headingGroupMessage.id;\n    groupsComponents.push(createMessageGroup(currentGroupId, guild, member, headingGroupMessage.time, handleMemberClick, messagesComponents));\n    messagesComponents = [];\n  };\n  messages.forEach(function (message, index) {\n    var userId = message.userId;\n    if (userId !== lastUserId && messagesComponents.length > 0) {\n      closeMessageGroupAndClearMessages();\n    }\n    if (messagesComponents.length === 0) {\n      headingGroupMessage = message;\n    }\n    messagesComponents.push( /*#__PURE__*/React.createElement(Message, {\n      key: message.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 29\n      }\n    }, message.content));\n    lastUserId = message.userId;\n    if (index + 1 === messages.length) {\n      closeMessageGroupAndClearMessages();\n    }\n  });\n  return /*#__PURE__*/React.createElement(StyledMessagesWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ScrollableArea, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(WelcomeChannelMessage, {\n    channelName: channelName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }), groupsComponents, /*#__PURE__*/React.createElement(\"div\", {\n    ref: bottomElement,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  })));\n};\n_s(MessagesWrapper, \"JvUP8LWjjxq01twnbtog6i/iHRM=\");\n_c2 = MessagesWrapper;\nexport default MessagesWrapper;\nvar _c, _c2;\n$RefreshReg$(_c, \"StyledMessagesWrapper\");\n$RefreshReg$(_c2, \"MessagesWrapper\");","map":{"version":3,"names":["React","useLayoutEffect","useRef","styled","MemberMessageGroup","Message","WelcomeChannelMessage","ScrollableArea","MemberCardPopup","data","StyledMessagesWrapper","div","_templateObject","_taggedTemplateLiteral","_c","createMessageGroup","groupId","guild","member","time","onMemberClick","messages","createElement","key","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","MessagesWrapper","_ref","_s","channelName","bottomElement","current","scrollIntoView","behavior","handleMemberClick","element","target","targetRect","getBoundingClientRect","show","direction","position","x","left","width","y","top","lastUserId","length","userId","groupsComponents","messagesComponents","headingGroupMessage","closeMessageGroupAndClearMessages","guildMembers","members","guildMember","find","m","_objectSpread","users","roles","currentGroupId","id","push","forEach","message","index","content","ref","_c2","$RefreshReg$"],"sources":["C:/Users/asus/Documents/discord-react-clone-master/discord-react-clone-master/src/components/Chat/MessagesWrapper.js"],"sourcesContent":["import React, { useLayoutEffect, useRef } from 'react';\nimport styled from 'styled-components';\n\nimport { MemberMessageGroup, Message } from './MemberMessage';\nimport WelcomeChannelMessage from './WelcomeChannelMessage';\nimport ScrollableArea from '../ScrollableArea';\nimport MemberCardPopup from '../MemberCardPopup';\n\nimport data from '../../data';\n\nconst StyledMessagesWrapper = styled.div`\n  flex: 1 1 auto;\n  position: relative;\n`;\n\nconst createMessageGroup = (groupId, guild, member, time, onMemberClick, messages) => (\n  <MemberMessageGroup\n    key={groupId}\n    guild={guild}\n    member={member}\n    time={time}\n    onMemberClick={onMemberClick}\n  >\n    {messages}\n  </MemberMessageGroup>\n);\n\nconst MessagesWrapper = ({ channelName, guild, messages }) => {\n  const bottomElement = useRef(null);\n\n  useLayoutEffect(() => {\n    bottomElement.current.scrollIntoView({ behavior: 'instant' });\n  });\n\n  const handleMemberClick = (element, member) => {\n    const { target } = element;\n    const targetRect = target.getBoundingClientRect();\n    MemberCardPopup.show({\n      direction: 'left',\n      position: { x: targetRect.left + targetRect.width + 10, y: targetRect.top },\n      member\n    });\n  };\n\n  let lastUserId = messages.length > 0 ? messages[0].userId : null;\n  const groupsComponents = [];\n  let messagesComponents = [];\n  let headingGroupMessage = null;\n\n  const closeMessageGroupAndClearMessages = () => {\n    const userId = headingGroupMessage.userId;\n    const guildMembers = guild ? guild.members : [];\n    const guildMember = guildMembers.find(m => m.userId === userId);\n    const member = {\n      ...data.users[headingGroupMessage.userId],\n      roles: guildMember ? guildMember.roles : null\n    };\n\n    const currentGroupId = headingGroupMessage.id;\n    groupsComponents.push(\n      createMessageGroup(\n        currentGroupId,\n        guild,\n        member,\n        headingGroupMessage.time,\n        handleMemberClick,\n        messagesComponents\n      )\n    );\n    messagesComponents = [];\n  };\n\n  messages.forEach((message, index) => {\n    const { userId } = message;\n\n    if (userId !== lastUserId && messagesComponents.length > 0) {\n      closeMessageGroupAndClearMessages();\n    }\n\n    if (messagesComponents.length === 0) {\n      headingGroupMessage = message;\n    }\n    messagesComponents.push(<Message key={message.id}>{message.content}</Message>);\n    lastUserId = message.userId;\n\n    if (index + 1 === messages.length) {\n      closeMessageGroupAndClearMessages();\n    }\n  });\n\n  return (\n    <StyledMessagesWrapper>\n      <ScrollableArea>\n        <WelcomeChannelMessage channelName={channelName} />\n        {groupsComponents}\n        <div ref={bottomElement} />\n      </ScrollableArea>\n    </StyledMessagesWrapper>\n  );\n};\n\nexport default MessagesWrapper;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}